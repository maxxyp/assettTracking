{"version":3,"sources":["common/ui/attributes/swipe.ts"],"names":[],"mappings":"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","file":"swipe.js","sourcesContent":["/// <reference path=\"../../../../typings/app.d.ts\" />\nimport { customAttribute } from \"aurelia-templating\";\nimport { inject } from \"aurelia-dependency-injection\";\nimport { bindable } from \"aurelia-templating\";\nimport { bindingMode } from \"aurelia-binding\";\n\n@customAttribute(\"swipe\")\n@inject(Element)\n\nexport class Swipe {\n    @bindable({ defaultBindingMode: bindingMode.oneWay })\n    public callback: any;\n    @bindable({ defaultBindingMode: bindingMode.oneWay })\n    public scope: any;\n    private _element: HTMLElement;\n    private _swipedir: string;\n    private _startX: number;\n    private _startY: number;\n    private _distX: number;\n    private _distY: number;\n    private _threshold: number;\n    private _restraint: number;\n    private _allowedTime: number;\n    private _elapsedTime: number;\n    private _startTime: number;\n\n    constructor(element: HTMLElement) {\n        this._element = element;\n        this._threshold = 300; // required min distance traveled to be considered swipe\n        this._restraint = 100; // maximum distance allowed at the same time in perpendicular direction\n        this._allowedTime = 250; // maximum time allowed to travel that distance\n    }\n\n    public attached(): void {\n        this._element.addEventListener(\"mouseup\", (e: MouseEvent) => {\n            this.touchend(e);\n        });\n        this._element.addEventListener(\"mousedown\", (e: MouseEvent) => {\n            this.touchstart(e);\n        });\n        this._element.addEventListener(\"mousemove\", (e: MouseEvent) => {\n            this.touchmove(e);\n        });\n        this._element.addEventListener(\"touchend\", (e: TouchEvent) => {\n            this.touchend(e);\n        });\n        this._element.addEventListener(\"touchstart\", (e: TouchEvent) => {\n            this.touchstart(e);\n        });\n\n    }\n\n    public detached(): void {\n        this._element.removeEventListener(\"mouseup\", (e: MouseEvent) => {\n            this.touchend(e);\n        });\n        this._element.removeEventListener(\"mousedown\", (e: MouseEvent) => {\n            this.touchstart(e);\n        });\n        this._element.removeEventListener(\"mousemove\", (e: MouseEvent) => {\n            this.touchmove(e);\n        });\n        this._element.removeEventListener(\"touchend\", (e: TouchEvent) => {\n            this.touchend(e);\n        });\n        this._element.removeEventListener(\"touchstart\", (e: TouchEvent) => {\n            this.touchstart(e);\n        });\n    }\n\n    private touchmove(e: MouseEvent): void {\n        e.preventDefault();\n    }\n\n    private touchstart(e: any): void {\n        let touchobj = e;\n        this._swipedir = \"none\";\n        if (e.constructor.name === \"TouchEvent\") {\n            this._startX = touchobj.touches[0].pageX;\n            this._startY = touchobj.touches[0].pageY;\n        } else {\n            this._startX = touchobj.pageX;\n            this._startY = touchobj.pageY;\n        }\n        this._startTime = new Date().getTime(); // record time when finger first makes contact with surface;\n    }\n\n    private touchend(e: any): void {\n        let touchobj = e;\n        if (e.constructor.name === \"TouchEvent\") {\n            this._distX = touchobj.changedTouches[0].pageX - this._startX;\n            this._distY = touchobj.changedTouches[0].pageY - this._startY;\n        } else {\n            this._distX = touchobj.pageX - this._startX;\n            this._distY = touchobj.pageY - this._startY;\n        }\n        this._elapsedTime = new Date().getTime() - this._startTime; // get time elapsed\n        if (this._elapsedTime <= this._allowedTime) { // first condition for awipe met\n            if (Math.abs(this._distX) >= this._threshold && Math.abs(this._distY) <= this._restraint) { // 2nd condition for horizontal swipe met\n                this._swipedir = (this._distX < 0) ? \"left\" : \"right\"; // if dist traveled is negative, it indicates left swipe\n            } else if (Math.abs(this._distY) >= this._threshold && Math.abs(this._distX) <= this._restraint) { // 2nd condition for vertical swipe met\n                this._swipedir = (this._distY < 0) ? \"up\" : \"down\"; // if dist traveled is negative, it indicates up swipe\n            }\n        }\n        this.callback.apply(this.scope, [this._swipedir]);\n    }\n}\n"],"sourceRoot":"../../.."}