{"version":3,"sources":["hema/business/services/jobSanityCheckService.ts"],"names":[],"mappings":";;;IAMA;QAII;YACI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,2BAAY,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;QAEtE,CAAC;QAED;;;UAGE;QACK,6CAAa,GAApB,UAAqB,GAAQ;YAA7B,iBAcC;YAZG,IAAI,WAAW,GAAG,UAAC,MAAc;gBAC7B,IAAM,OAAO,GAAG,iCAA+B,GAAG,CAAC,EAAE,WAAM,MAAQ,CAAC;gBACpE,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,iDAAuB,CAAC,iEAA+B,CAAC,gBAAgB,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC;gBAE3H,MAAM,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,MAAM,QAAA,EAAE,CAAC;YAC3C,CAAC,CAAC;YAEF,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC5B,MAAM,CAAC,WAAW,CAAC,0BAA0B,CAAC,CAAC;YACnD,CAAC;YAED,MAAM,CAAC,EAAE,aAAa,EAAE,KAAK,EAAE,CAAC;QACpC,CAAC;QACL,4BAAC;IAAD,CA5BA,AA4BC,IAAA;IA5BY,sDAAqB","file":"jobSanityCheckService.js","sourcesContent":["import { Job } from \"../models/job\";\nimport * as Logging from \"aurelia-logging\";\nimport { ObjectHelper } from \"../../../common/core/objectHelper\";\nimport { AnalyticsExceptionModel } from \"../../../common/analytics/analyticsExceptionModel\";\nimport { AnalyticsExceptionCodeConstants } from \"../../../common/analytics/analyticsExceptionCodeConstants\";\n\nexport class JobSanityCheckService {\n\n    private _logger: Logging.Logger;\n\n    constructor() {\n        this._logger = Logging.getLogger(ObjectHelper.getClassName(this));\n\n    }\n\n    /*\n        In field trial we are getting junk from WMIS - e.g. job documents with missing details.\n        This code should be removed when we no longer see this happening.\n    */\n    public isBadlyFormed(job: Job): { isBadlyFormed: boolean, reason?: string } {\n\n        let badlyFormed = (reason: string) => {\n            const message = `Badly formed job with jobId ${job.id} : ${reason}`;\n            this._logger.error(message, new AnalyticsExceptionModel(AnalyticsExceptionCodeConstants.BADLY_FORMED_JOB, false, message));\n\n            return { isBadlyFormed: true, reason };\n        };\n\n        if (!(job.tasks || []).length) {\n            return badlyFormed(\"no activities for today.\");\n        }\n\n        return { isBadlyFormed: false };\n    }\n}\n"],"sourceRoot":"../../.."}