{"version":3,"sources":["hema/business/services/supportService.ts"],"names":[],"mappings":";;;;;;;;;;;;IAUA;QAII,wBAAY,OAAiB,EAAE,eAAgC;YAA/D,iBAMC;YALG,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;YACxB,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;YACxC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,yCAAmB,CAAC,aAAa,EAAE,UAAC,SAAqB;gBACrF,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAa,mCAAgB,CAAC,sBAAsB,EAAE,mCAAgB,CAAC,4BAA4B,EAAE,SAAS,CAAC,CAAC;YACrI,CAAC,CAAC,CAAC;QACP,CAAC;QAEM,yCAAgB,GAAvB;YACI,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAa,mCAAgB,CAAC,sBAAsB,EAAE,mCAAgB,CAAC,4BAA4B,CAAC,CAAC;QACjI,CAAC;QAdQ,cAAc;YAD1B,0BAAM,CAAC,yBAAW,EAAE,0CAAe,CAAC;qDAKe,0CAAe;WAJtD,cAAc,CAe1B;QAAD,qBAAC;KAfD,AAeC,IAAA;IAfY,wCAAc","file":"supportService.js","sourcesContent":["import { ISupportService } from \"./interfaces/ISupportService\";\nimport { IJobUpdate } from \"../../api/models/fft/jobs/jobupdate/IJobUpdate\";\nimport { inject } from \"aurelia-framework\";\nimport { HemaStorage } from \"../../core/services/hemaStorage\";\nimport { IStorage } from \"../../../common/core/services/IStorage\";\nimport { JobServiceConstants } from \"./constants/jobServiceConstants\";\nimport { EventAggregator } from \"aurelia-event-aggregator\";\nimport { StorageConstants } from \"../constants/storageConstants\";\n\n@inject(HemaStorage, EventAggregator)\nexport class SupportService implements ISupportService {\n    private _storage: IStorage;\n    private _eventAggregator: EventAggregator;\n\n    constructor(storage: IStorage, eventAggregator: EventAggregator) {\n        this._storage = storage;\n        this._eventAggregator = eventAggregator;\n        this._eventAggregator.subscribe(JobServiceConstants.JOB_COMPLETED, (jobUpdate: IJobUpdate) => {\n            this._storage.set<IJobUpdate>(StorageConstants.HEMA_STORAGE_CONTAINER, StorageConstants.HEMA_SOTRAGE_LAST_JOB_UPDATE, jobUpdate);\n        });\n    }\n\n    public getLastJobUpdate(): Promise<IJobUpdate> {\n        return this._storage.get<IJobUpdate>(StorageConstants.HEMA_STORAGE_CONTAINER, StorageConstants.HEMA_SOTRAGE_LAST_JOB_UPDATE);\n    }\n}\n"],"sourceRoot":"../../.."}