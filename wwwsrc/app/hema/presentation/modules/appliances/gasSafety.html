<template>
    <view-state view-state.bind="viewState" view-state-text.bind="viewStateText">
        <div class="card details-card fade-in-content">
            <div class="card-block">
                <form form-manager class="validation-state-indicator ${currentDataState | dataStateStyle:canEdit}">
                    <div class="row" if.bind="isLandlordJob">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.applianceMake}</label>
                            </div>
                            <div class="col-xs-3">
                                <text-box value.bind="gasSafetyViewModel.applianceMake" disabled.bind="!canEdit"></text-box>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="isLandlordJob">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.applianceModel}</label>
                            </div>
                            <div class="col-xs-3">
                                <text-box value.bind="gasSafetyViewModel.applianceModel" disabled.bind="!canEdit"></text-box>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="isLandlordJob">
                        <div class="form-group">
                            <div class="col-xs-4">

                                <label>${labels.requestedToTest}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="requestedToTestLookup" value.bind="gasSafetyViewModel.requestedToTest" multi-select.bind="false"
                                             button-width="30%" disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="isLandlordJob">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.ableToTest}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="ableToTestLookup" value.bind="gasSafetyViewModel.ableToTest" multi-select.bind="false"
                                             button-width="30%" disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.didYouWorkOnAppliance}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="didYouWorkOnApplianceLookup" value.bind="gasSafetyViewModel.workedOnAppliance" multi-select.bind="false"
                                    button-width="30%" disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="showVisuallyCheckRelight">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.didYouVisuallyCheckText}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="didYouVisuallyCheckLookup" value.bind="gasSafetyViewModel.didYouVisuallyCheck" multi-select.bind="false"
                                    button-width="30%" disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="showPerformanceTestNotDoneReasons">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.reasonWhyNot}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="performanceTestNotDoneReasonLookup" value.bind="gasSafetyViewModel.performanceTestsNotDoneReason"
                                    multi-select.bind="false" button-width="30%" disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="showApplianceStripped">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.applianceStrippedText}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="applianceStrippedLookup" value.bind="gasSafetyViewModel.applianceStripped" multi-select.bind="false"
                                    button-width="30%" disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="showPerformanceTestNotDoneReasonsForSupplementary">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.reasonWhyNotSupplementary}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="performanceTestNotDoneReasonLookupForSupplementary" value.bind="gasSafetyViewModel.performanceTestsNotDoneReasonForSupplementary"
                                    multi-select.bind="false" button-width="30%" disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="showSupplementaryApplianceStripped">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.supplementaryApplianceStrippedText}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="applianceStrippedLookup" value.bind="gasSafetyViewModel.supplementaryApplianceStripped" multi-select.bind="false"
                                    button-width="30%" disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="showApplianceTightnessOk">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.applianceTightnessText}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="applianceTightnessLookup" value.bind="gasSafetyViewModel.applianceTightness" multi-select.bind="false"
                                    button-width="30%" disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="showChimneyInstallationAndTests">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.chimneyInstallationAndTestsText}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="chimneyInstallationAndTestsLookup" value.bind="gasSafetyViewModel.chimneyInstallationAndTests" multi-select.bind="false"
                                    button-width="30%" disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="showVentSizeConfigOk">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.ventSizeConfigText}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="ventSizeConfigLookup" value.bind="gasSafetyViewModel.ventSizeConfig" multi-select.bind="false" button-width="30%"
                                    disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="showSafetyDevice">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.safetyDeviceText}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="safetyDeviceLookup" value.bind="gasSafetyViewModel.safetyDevice" multi-select.bind="false" button-width="30%"
                                    disabled.bind="!canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <div class="row" if.bind="showApplianceSafe">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.isApplianceSafe}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="isApplianceSafeLookup" value.bind="gasSafetyViewModel.isApplianceSafe" multi-select.bind="false"
                                    button-width="30%" disabled.bind="disableApplianceSafe || !canEdit">
                                </button-list>
                            </div>
                        </div>
                    </div>
                   <div class="row" if.bind="showCurrentStandards">
                        <div class="form-group">
                            <div class="col-xs-4">
                                <label>${labels.toCurrentStandards}</label>
                            </div>
                            <div class="col-xs-8">
                                <button-list items.bind="toCurrentStandardsLookup" value.bind="gasSafetyViewModel.toCurrentStandards" multi-select.bind="false"
                                    button-width="30%" disabled.bind="!canEdit || disableToCurrentStandards">
                                </button-list>
                            </div>
                        </div>
                    </div>
                    <hr if.bind="isSafe === false" />
                    <div class="card details-card" if.bind="unsafeReasonFields.length > 0">
                        <div class="row">
                            <span class=" col-xs-12">
                            <span repeat.for="field of unsafeReasonFields">
                                <span class="unsafe-block">
                                    ${unsafeSituationLookup[field]}
                                </span>
                            </span>
                            </span>
                        </div>
                        <div class="card-block">
                            <div class="row">
                                <div class="col-xs-4">
                                    <label><strong>${labels.unsafetySituationHeader}</strong></label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <div class="col-xs-4">
                                        <label>${labels.report}</label>
                                    </div>
                                    <div class="col-xs-8">
                                        <text-area if.bind="isLandlordJob" value.bind="gasUnsafeViewModel.report" disabled.bind="!canEdit" placeholder="${validationRules['gasUnsafeViewModel.report'].maxLength} ${labels.characterLimitSuffix}"
                                            maxlength.bind="validationRules['gasUnsafeViewModel.report'].maxLength"
                                            maxlength2.bind="businessRules.reportMaxCharsLandlord"
                                            maxlength2-text.bind="labels.reportMaxCharsLandlordText"
                                            maxlength2-exceeded-text.bind="labels.reportMaxCharsLandlordExceededText"></text-area>
                                        <text-area if.bind="!isLandlordJob" value.bind="gasUnsafeViewModel.report" disabled.bind="!canEdit" placeholder="${validationRules['gasUnsafeViewModel.report'].maxLength} ${labels.characterLimitSuffix}"
                                                maxlength.bind="validationRules['gasUnsafeViewModel.report'].maxLength"></text-area>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <div class="col-xs-4">
                                        <label>${labels.conditionAsLeft}</label>
                                    </div>
                                    <div class="col-xs-8">
                                        <button-list items.bind="conditionAsLeftLookup" value.bind="gasUnsafeViewModel.conditionAsLeft" multi-select.bind="false"
                                            button-width="30%" disabled.bind="!canEdit || disableConditionAsLeft" button-height="100px">
                                        </button-list>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <div class="col-xs-4">
                                        <label>${labels.cappedTurnedOff}</label>
                                    </div>
                                    <div class="col-xs-8">
                                        <button-list items.bind="cappedTurnedOffLookup" value.bind="gasUnsafeViewModel.cappedTurnedOff" multi-select.bind="false"
                                            button-width="30%" disabled.bind="!canEdit">
                                        </button-list>
                                        <span if.bind="showUnsafeWarningMsg">
                                            <strong>${labels.unsafeWarningMsg}</strong>
                                        </span>
                                    </div>                                    
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <div class="col-xs-4">
                                        <label>${labels.labelAttachedRemoved}</label>
                                    </div>
                                    <div class="col-xs-8">
                                        <button-list items.bind="labelAttachedRemovedLookup" value.bind="gasUnsafeViewModel.labelAttachedRemoved" multi-select.bind="false"
                                            button-width="30%" disabled.bind="!canEdit">
                                        </button-list>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <div class="col-xs-4">
                                        <label>${labels.ownedByCustomer}</label>
                                    </div>
                                    <div class="col-xs-8">
                                        <button-list items.bind="ownedByCustomerLookup" value.bind="gasUnsafeViewModel.ownedByCustomer" multi-select.bind="false"
                                            button-width="30%" disabled.bind="!canEdit">
                                        </button-list>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <div class="col-xs-4">
                                        <label>${labels.letterLeft}</label>
                                    </div>
                                    <div class="col-xs-8">
                                        <button-list items.bind="letterLeftLookup" value.bind="gasUnsafeViewModel.letterLeft" multi-select.bind="false" button-width="30%"
                                            disabled.bind="!canEdit">
                                        </button-list>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group">
                                    <div class="col-xs-4">
                                        <label>${labels.signatureObtained}</label>
                                    </div>
                                    <div class="col-xs-8">
                                        <button-list items.bind="signatureObtainedLookup" value.bind="gasUnsafeViewModel.signatureObtained" multi-select.bind="false"
                                            button-width="30%" disabled.bind="!canEdit">
                                        </button-list>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="action-group" if.bind="canEdit">
                    <button if.bind="(isSafe === true || isSafe === undefined) && canEdit" class="btn btn-primary" click.trigger="unsafeSituation()">${labels.unsafeSituation}</button>
                     <button class="btn btn-secondary" click.trigger="undo()">
                        ${labels.undo}
                    </button>
                    <button class="btn btn-tertiary arrow-blue-right" click.trigger="clear()">
                        ${labels.clear}
                    </button>
                </div>
            </div>
        </div>
    </view-state>
</template>