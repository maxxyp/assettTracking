{"version":3,"sources":["hema/api/services/sharePriceService.ts"],"names":[],"mappings":"AAAA,qDAAqD;;;;IAQ7C,IAAA,mGAAoB,CAAgC;IAE5D;QAII;YACI,IAAI,CAAC,WAAW,GAAG,IAAI,gCAAU,EAAE,CAAC;QACxC,CAAC;QAEM,yCAAa,GAApB;YAAA,iBAeC;YAdG,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC;iBAC5C,IAAI,CAAC,UAAC,QAAQ;gBACX,IAAI,OAAkB,CAAC;gBACvB,IAAI,CAAC;oBACD,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;oBAC1D,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;gBACtB,CAAC;gBAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACT,MAAM,CAAC,CAAC;gBACZ,CAAC;YAEL,CAAC,CAAC;iBACD,KAAK,CAAC,UAAC,KAAK;gBACT,MAAM,IAAI,2BAAY,CAAC,KAAI,EAAE,eAAe,EAAE,8CAA8C,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;YACrH,CAAC,CAAC,CAAC;QACX,CAAC;QACL,wBAAC;IAAD,CAxBA,AAwBC,IAAA;IAxBY,8CAAiB","file":"sharePriceService.js","sourcesContent":["/// <reference path=\"../../../../typings/app.d.ts\" />\n\nimport { HttpClient } from \"aurelia-http-client\";\nimport {SharePriceServiceConstants} from \"./constants/sharePriceServiceConstants\";\nimport {ITicker} from \"../models/sharePrice/ITicker\";\nimport {ApiException} from \"../../../common/resilience/apiException\";\nimport {ISharePriceService} from \"./interfaces/ISharePriceService\";\n\nconst { SHARE_PRICE_ENDPOINT } = SharePriceServiceConstants;\n\nexport class SharePriceService implements ISharePriceService { \n\n    private _httpClient: HttpClient;\n\n    constructor() {\n        this._httpClient = new HttpClient();\n    }\n    \n    public getSharePrice(): Promise<ITicker> {\n        return this._httpClient.get(SHARE_PRICE_ENDPOINT)\n            .then((response) => {           \n                let tickers: ITicker[];\n                try {\n                    tickers = JSON.parse(response.response.replace(\"//\", \"\"));\n                    return tickers[0];\n                } catch (e) {\n                    throw e;\n                }\n                \n            })\n            .catch((error) => {\n                throw new ApiException(this, \"getSharePrice\", \"There was an error obtaining the share price\", null, error, null);\n            });\n    }\n}\n"],"sourceRoot":"../../.."}